<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>mars3d</title>
    <meta name="description" content="This is a template example page for Sogrey/CodeSandbox." />

    <style>
      html,
      body,
      .mars3d-container {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <div id="mars3dContainer" class="mars3d-container"></div>
    <!--引入cesium基础lib-->
    <script>
      // window.CESIUM_BASE_URL = "./lib/Cesium/" //非必须，如jsp、asp.net等非html框架报错时建议取消注释
    </script>
    <link href="./libs/Cesium/Widgets/widgets.css" rel="stylesheet" type="text/css" />
    <script src="./libs/Cesium/Cesium.js" type="text/javascript"></script>
    <script src="./libs/turf/turf.min.js" type="text/javascript"></script>

    <!--引入mars3d库lib-->
    <link href="./libs/mars3d/mars3d.css" rel="stylesheet" type="text/css" />
    <script src="./libs/mars3d/mars3d.js" type="text/javascript"></script>

    <!--引入mars3d库插件lib（按需引入）-->
    <!-- <script src="./libs/mars3d/plugins/space/mars3d-space.js" type="text/javascript"></script> -->

    <script>
      // 创建三维地球场景
      const map = new mars3d.Map('mars3dContainer', {
        scene: {
          center: { lat: 30.054604, lng: 108.885436, alt: 17036414, heading: 0, pitch: -90 },
          showSun: true,
          showMoon: true,
          showSkyBox: true,
          showSkyAtmosphere: false, // 关闭球周边的白色轮廓 map.scene.skyAtmosphere = false
          fog: true,
          fxaa: true,
          globe: {
            showGroundAtmosphere: false, // 关闭大气（球表面白蒙蒙的效果）
            depthTestAgainstTerrain: false,
            baseColor: '#546a53',
          },
          cameraController: {
            zoomFactor: 3.0,
            minimumZoomDistance: 1,
            maximumZoomDistance: 50000000,
            enableRotate: true,
            enableZoom: true,
          },
          mapProjection: mars3d.CRS.EPSG3857, // 2D下展示墨卡托投影
          mapMode2D: Cesium.MapMode2D.INFINITE_SCROLL, // 2D下左右一直可以滚动重复世界地图
        },
        control: {
          baseLayerPicker: true, // basemaps底图切换按钮
          homeButton: true, // 视角复位按钮
          sceneModePicker: true, // 二三维切换按钮
          navigationHelpButton: true, // 帮助按钮
          fullscreenButton: true, // 全屏按钮
          contextmenu: { hasDefault: true }, // 右键菜单
        },
        terrain: {
          url: 'https://data.mars3d.cn/terrain',
          show: true,
        },
        basemaps: [
          {
            name: '天地图影像',
            icon: 'https://data.mars3d.cn/img/thumbnail/basemap/tdt_img.png',
            type: 'tdt',
            layer: 'img_d',
            show: true,
          },
        ],
      })

      // 打印测试信息
      console.log('mars3d的Map主对象构造完成', map)
      console.log('其中Cesium原生的Cesium.Viewer为', map.viewer)

      console.log('当前电脑是否支持webgl2', Cesium.FeatureDetection.supportsWebgl2(map.scene))
    </script>
  </body>
</html>
